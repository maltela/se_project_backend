package de.management.dao;

import java.util.ArrayList;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import org.jboss.logging.Logger;

import de.management.entities.*;

@Stateless
/** 
 * Persistierung-Methoden 
 * @author Malte Lange 
 *
 */
public class EventManagementDAO implements EventManagementDAOLocal {
	private static final Logger logger = Logger.getLogger(EventManagementDAO.class);
	
	@PersistenceContext
	private EntityManager em;
	
	/** 
	 * 1. Benutzer anlegen 
	 * @author Malte Lange 
	 */
	@Override
	public Integer createUser(String username, String deviceID) {
		User user = new User(username, deviceID);
		em.persist(user);
		logger.info("User"+username+" anlegen");
		
		if (em.contains(user))
		{
			return user.getUserID();
		}	
		else 
		{
			return 501;
		}
	}
	/**
	 * 2. Übersicht aller verfügbaren Events 
	 * @author  Malte Lange 
	 */
	@Override
	public ArrayList<Event> getEventOverview() {
		logger.info("Ausgabe der Event-Übersicht");
		Query query = em.createQuery("select e from Event e test");
		@SuppressWarnings("unchecked")
		ArrayList<Event> list = (ArrayList<Event>) query.getResultList();
		
		return list;
	}
	
	/** 
	 * 3. Informationen einer Veranstaltung 
	 * @author Malte Lange 
	 */
	
	@Override
	public Event getEvent(Integer id) {
		logger.info ("Get Event ");
		return (em.find(Event.class,id));
		
	}
	
	/**
	 *  4. Push-Nachricht erstellen
	 *  @author Malte Lange 
	 */
	@Override
	public Integer createPush(String msg) {
		// TODO Auto-generated method stub
		return null;
	}
	
	/************************
	 * Adminstration Funktionen
	 */
	@Override
	public Integer createEvent(Event event, Integer UserID) {
		// TODO Auto-generated method stub
		return null;
	}
	@Override
	public Integer createSession(Session session, Integer UserID) {
		// TODO Auto-generated method stub
		return null;
	}
	@Override
	public Integer updateEvent(Event event, Integer userID) {
		// TODO Auto-generated method stub
		return null;
	}
	@Override
	public Integer updateSession(Session session, Integer userID) {
		// TODO Auto-generated method stub
		return null;
	}
	@Override
	public Integer dropEvent(Integer eventID, Integer userID) {
		// TODO Auto-generated method stub
		return null;
	}
	@Override
	public Integer dropSession(Integer sessionID, Integer userID) {
		// TODO Auto-generated method stub
		return null;
	}


	
		
}
